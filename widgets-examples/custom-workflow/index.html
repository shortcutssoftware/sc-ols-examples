<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="icon" type="image/png" href="/images/fav-icon.png" />
    <link rel="apple-touch-icon" type="image/png" href="/images/apple-touch-icon.png" />
    <link rel="stylesheet" type="text/css" href="css/app.css" />
    <link rel="stylesheet" type="text/css" href="css/app.fonts.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.1/jquery.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.22/require.min.js" type="text/javascript"></script>
    <script src="https://d19ujuohqco9tx.cloudfront.net/webwidgets/7-20-6-37/en-us/widget-api.js" type="text/javascript"></script>
    <script src="https://checkout.stripe.com/checkout.js"></script>
    <title>Shortcuts Widgets - Urban Retreat Demo</title>
</head>

<body>
    <header>
        <div class="column c_50">
            <p><strong><a href="javascript:void(0);" id="register" class="login">Register</a></strong> | 
                <a href="javascript:void(0);" id="login" class="login"><strong>Login</strong></a></p>
        </div>
        <div class="column c_50" style="text-align: right;">
            <p><strong>Urban Retreat</strong> Urban Retreat at The White House, 2-4 Hans Crescent, London, SW1X 0LH</p>
        </div>
        <div class="clear"></div>
    
    </header>
    <div style="max-width: 500px;">
        <h1>Shortcuts Widgets - Urban Retreat Demo</h1>
        <div id="messages">
            <span id="errorMessage" class="error" style="display: none;"></span>
        </div>
        <div id="widgettarget" style="display: none;">
        </div>
        <div id="loadingAnimation" class="wrap" style="display:none;">
            <div class="loading">
                <div class="bounceball"></div>
                <div class="text">please wait</div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        requirejs(['js/app', 'js/config', 'js/login'], function (app, config, login) {
            $(function () {
                app.initializeApplication($('#widgettarget'), config.siteId).then(
                    function (sites) {
                        $('#widgettarget').show();
                        $('#errorMessage').hide();
                        $('#loadingAnimation').hide();
                    },
                    function (xhr) {
                        $('#errorMessage').html(xhr.responseText);
                        $('#errorMessage').show();
                        $('#loadingAnimation').hide();
                    });
            });

            $('#login').click(function(){
                login.initializeApplication($('#widgettarget'), config.siteId).then(
                    function (sites) {
                        $('#widgettarget').show();
                        $('#errorMessage').hide();
                        $('#loadingAnimation').hide();
                    },
                    function (xhr) {
                        $('#errorMessage').html(xhr.responseText);
                        $('#errorMessage').show();
                        $('#loadingAnimation').hide();
                    });
            });
        });        
    </script>
</body>
</html>